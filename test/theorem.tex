\usemodule[visualcounter]

\defineenumeration[theorem][way=bysection]

\definevisualcounter[visualtheorem][counter=theorem]

\starttext

\section{ Blah}
\dorecurse{10}
{\starttheorem 
\inmargin{\usevisualcounter{visualtheorem}}
\input knuth 
\stoptheorem}

\section{ Blah}
\dorecurse{15}
{\starttheorem 
\inmargin{\usevisualcounter{visualtheorem}}
\input knuth 
\stoptheorem}

\stoptext

